# 一起刷高数webapp文档说明

标签： JavaEE SpringBoot Wexin-Java 前后端分离

---

##项目说明
- 采用SpringBoot、Hibernate、wexin-java-tools框架，
  开发的一套供高校在校生在线交流的微信嵌入式网页app问答平台。
- 采用当下非常流行的前后台分离的架构来构建应用，后台只需提供相应的接口给前端。
<br>

##具有如下特点
- 灵活的持久层架构，可以非常方便的更改数据库建表约束及数据库迁移
- 完善的素材管理业务及其架构
- 完善的XSS防范及脚本过滤，彻底杜绝XSS攻击
- 友好的代码结构及注释，便于阅读及二次开发
- 页面交互使用Vue2.x，极大的提高了开发效率
- 引入swagger文档支持，方便编写API接口文档
- 支持AOP式的业务日志保存
<br>

 ##开发环境
- JDK 1.8
- MySQL 5.5+
- Tomcat 9.0+
- Maven 3.5+
- IDEA 2017.3
<br>

##技术选型
- 核心框架 : Spring Boot 1.5
- 持久层框架：Hibernate-JPA 2.1
- 数据库连接池：Druid 1.1.6
- 日志管理：SLF4J log-back
- 页面交互：Vue2.x
- 视图框架：Spring MVC 4.3
- 微信SDK : weixin-java-tools 2.9.8
<br>

##项目结构

spring-boot-gaoshu-plus
   
    ├─data
    │  └─renren renren-security框架生成的代码 用于搭建后台
    │
    ├─gaoshu-admin  后台模块，待实现
    │
    ├─gaoshu-base  基础通用模块
    │  ├─context 上下文
    │  ├─exception
    │  ├─lang   常量及枚举类
    │  ├─upload 素材管理实现
    │  └─utils  工具类
    │
    ├─gaoshu-core    核心业务模块
    │  ├─annotation  自定义注解
    │  ├─data 表单
    │  ├─persist  持久层
    │  └─validator  暂时未用到
    │
    ├─gaoshu-web    web接口模块
    │  │  ├─config  配置类
    │  │  └─web  web层组件
    │  └─resources  全局配置文件
    │
    └─gaoshu-wx    微信接入模块
       └─config  微信sdk配置类
         ├─builder
         └─handler  微信公众号消息处理器
<br>

 ##本地部署
    以下说明都为开发环境的配置，
    若要配置生产环境下的配置需要更改application.yml下spring.active的属性为 pro
 - 通过git下载源码
 - 项目地址 https://github.com/a347807131/spring-boot-gaoshu-plus
 - 创建数据库db_gaoshu_plus，或者更改application-dev.yml中配置文件关于数据库链接的配置
 - 执行data/db.sql文件，初始化数据【按需导入表结构及数据】
 - 修改gaoshu-web模块下application-dev.yml文件，更新MySQL账号和密码
 - application.yml中相关配置
    - app：
        - store.root: 素材文件储存目录
        - domain: 域名
    - wechat:
        - mp: 该级为公众号接入相关配置           
            - appId: 
            - secret: 
            - token: 
            - aesKey: 若不开启aes加密模式，直接不填写该项配置 
        - pay: 该级为微信支付接入相关配置         
            - appId: 
            - mchId: 商户号
            - mchKey: 商户key
            - keyPath: 证书存放路径
 - 在项目根目录下，执行mvn clean install
 <br>
 
 ##待优化部分
 - 优化素材管理业务，将素材保存到第三方云服务平台
 - 实现jpa二级缓存
 - 实现动态多数据源及利用renrenren-fast框架快速构建后台管理模块
 - download接口uri匹配规则采用正则表达式进行匹配
 - 加入验证码及其关联业务
 - 实现邮件通知业务
 <br>
 
 ##问题
 - **严重** maven多模块打包失败，如果不能解决，项目将无法部署到生产环境
 - web接口查询返回的post和comment信息存在大量用户信息沉於问题
 - 由于美国的软件出口政策，JDK没有支持32位以上的加密包，所以无法在公众号接入下启动加密模式，如有需要，需要进行手动往jre或jdk中添加以上加密包

        按原设计，答题者在选择一个问题进行回答后，该问题将只能为这两人所见，但该设计并未给出如果答案不满意的时候该怎么处理。并且在目前进度下，需要修改和实现大量的业务代码。
        所以我个人的设计是问题公开，满意回答者由答主选定并发放悬赏。所以用户在前端结题时提交问题id和用户id即可。
 